@import "leaflet/dist/leaflet.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ------------------------------------------------------------------ */
/* CSS custom properties — dark mode preparation & theming             */
/* ------------------------------------------------------------------ */
@layer base {
  :root {
    /* Surface & background */
    --color-surface: 250 250 249;        /* stone-50 */
    --color-surface-raised: 255 255 255; /* white */
    --color-surface-sunken: 245 245 244; /* stone-100 */

    /* Text */
    --color-text-primary: 28 25 23;      /* stone-900 */
    --color-text-secondary: 87 83 78;    /* stone-600 */
    --color-text-muted: 168 162 158;     /* stone-400 */

    /* Borders */
    --color-border: 231 229 228;         /* stone-200 */
    --color-border-strong: 214 211 209;  /* stone-300 */

    /* Brand (teal) */
    --color-brand: 13 148 136;           /* brand-600 */
    --color-brand-hover: 15 118 110;     /* brand-700 */

    /* Private (violet) */
    --color-private: 124 58 237;         /* private-600 */
    --color-private-hover: 109 40 217;   /* private-700 */
  }

  body {
    @apply font-sans antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Smooth scroll globally, respect reduced motion */
  html {
    scroll-behavior: smooth;
  }
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Consistent focus-visible styling across all interactive elements */
  *:focus-visible {
    @apply outline-none ring-2 ring-brand-500 ring-offset-2 ring-offset-stone-50;
  }

  /* Remove focus ring on mouse click (focus-visible only shows for keyboard) */
  *:focus:not(:focus-visible) {
    @apply outline-none ring-0 ring-offset-0;
  }
}

/* ------------------------------------------------------------------ */
/* Component utilities                                                 */
/* ------------------------------------------------------------------ */
@layer utilities {
  /* Hide scrollbar but keep scrollable — used on tab bars */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Thin styled scrollbar for tab overflow on desktop */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.stone.300') transparent;
  }
  .scrollbar-thin::-webkit-scrollbar {
    height: 4px;
  }
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 9999px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: theme('colors.stone.300');
    border-radius: 9999px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: theme('colors.stone.400');
  }

  /* Tab content slide animations */
  .tab-panel-enter {
    animation: tab-slide-in 0.25s cubic-bezier(0.4, 0, 0.2, 1) both;
  }
  .tab-panel-enter-left {
    animation: tab-slide-left 0.25s cubic-bezier(0.4, 0, 0.2, 1) both;
  }
  .tab-panel-enter-right {
    animation: tab-slide-right 0.25s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  /* Gradient left border for private school cards */
  .border-l-gradient-private {
    border-left: 4px solid transparent;
    border-image: linear-gradient(to bottom, #a78bfa, #7c3aed) 1;
  }

  /* Staggered animation delays for list items */
  .stagger-1 { animation-delay: 0.03s; }
  .stagger-2 { animation-delay: 0.06s; }
  .stagger-3 { animation-delay: 0.09s; }
  .stagger-4 { animation-delay: 0.12s; }
  .stagger-5 { animation-delay: 0.15s; }
  .stagger-6 { animation-delay: 0.18s; }
  .stagger-7 { animation-delay: 0.21s; }
  .stagger-8 { animation-delay: 0.24s; }
}

/* ------------------------------------------------------------------ */
/* Leaflet map                                                         */
/* ------------------------------------------------------------------ */
.leaflet-container {
  width: 100%;
  height: 100%;
}

/* ------------------------------------------------------------------ */
/* Ofsted-coloured circle markers                                      */
/* ------------------------------------------------------------------ */
.school-marker-outstanding {
  background-color: #16a34a;
  border: 2px solid #15803d;
}
.school-marker-good {
  background-color: #2563eb;
  border: 2px solid #1d4ed8;
}
.school-marker-ri {
  background-color: #d97706;
  border: 2px solid #b45309;
}
.school-marker-inadequate {
  background-color: #dc2626;
  border: 2px solid #b91c1c;
}
.school-marker-default {
  background-color: #6b7280;
  border: 2px solid #4b5563;
}
/* Private school markers — violet */
.school-marker-private {
  background-color: #8b5cf6;
  border: 2px solid #7c3aed;
}

/* ------------------------------------------------------------------ */
/* Sticky header backdrop for filter/summary bars                      */
/* ------------------------------------------------------------------ */
.sticky-header-blur {
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
}

/* ------------------------------------------------------------------ */
/* Global scrollbar styling                                            */
/* ------------------------------------------------------------------ */
@media (min-width: 640px) {
  /* Styled scrollbar for non-mobile browsers */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: #d6d3d1; /* stone-300 */
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: content-box;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #a8a29e; /* stone-400 */
    border: 2px solid transparent;
    background-clip: content-box;
  }
}

/* ------------------------------------------------------------------ */
/* Share toast notification                                             */
/* ------------------------------------------------------------------ */
.share-toast {
  animation: share-toast 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
